# Sway config (Wayland)
# Inspired by your i3 config

set $mod Mod4

### Fonts
# Waybar handles most text; Sway still uses this for titlebars if enabled
font pango:monospace 11

### Environment & portals (optional but nice for screensharing)
# exec systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
# exec /usr/lib/xdg-desktop-portal -r
# exec /usr/lib/xdg-desktop-portal-wlr -r

### Autostart
# Autostart XDG .desktop files (Wayland-aware)
# 'dex -ae sway' will only start entries matching this session
exec_always dex -ae sway

### Environment & portals
# Make systemd user services aware of Sway's Wayland environment
exec_always dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway XDG_SESSION_DESKTOP=sway SWAYSOCK

# Import these vars into systemd so it can start portals correctly
exec_always systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP XDG_SESSION_DESKTOP SWAYSOCK

# Start (not restart) the portals once Wayland is ready
exec_always systemctl --user start xdg-desktop-portal-wlr.service
exec_always systemctl --user start xdg-desktop-portal.service

exec waybar

# Wallpaper (feh -> swaybg)
exec_always swaybg --image ~/.config/sway/wallpaper.jpg --mode fill

# Applets (Waybar has a tray, these will dock there)
exec_always nm-applet
exec_always blueman-applet
# If you like a volume tray, pasystray works well:
# exec pasystray

# Display profiles (xrandr -> kanshi). See kanshi config below.
exec_always kanshi

# Idle + lock (xss-lock/i3lock -> swayidle/swaylock)
exec_always swayidle -w \
  timeout 300 'swaylock -f' \
  timeout 600 'systemctl suspend-then-hibernate' \
  before-sleep 'swaylock -f'

bindsym XF86MonBrightnessUp exec brightnessctl set +10%
bindsym XF86MonBrightnessDown exec brightnessctl set 10%-

output * {
  #adaptive_sync on
  #render_bit_depth 10
  #hdr on
}

# timeout 600 'swaymsg "output * power off"' \
# resume 'swaymsg "output * power on"' \

### Input (keyboard layout like your XKB settings)
input * {
  xkb_layout za
  xkb_options caps:swapescape
}

### Mouse/Window behavior
floating_modifier $mod
# Sway doesn’t have i3’s `tiling_drag` option — dragging works with $mod by default

### Launchers
set $term alacritty
set $menu wofi --show drun --prompt "run:" --allow-images

bindsym $mod+Return exec $term
bindsym $mod+q kill
bindsym $mod+d exec $menu

### Focus
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+semicolon focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

### Move windows
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+semicolon move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

### Split / layout / fullscreen
bindsym $mod+h split h
bindsym $mod+v split v
bindsym $mod+f fullscreen toggle

bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

### Floating / focus mode toggle
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle

### Container navigation
bindsym $mod+a focus parent
# bindsym $mod+d focus child  # (unused in your i3 file)

### Workspaces (keep your 1..10)
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

### Config reload / restart / exit
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec 'swaynag -t warning -m "Exit Sway?" -b "Yes, exit" "swaymsg exit"'

### Resize mode (same semantics as i3)
mode "resize" {
  bindsym j          resize shrink width 10px
  bindsym k          resize grow height 10px
  bindsym l          resize shrink height 10px
  bindsym semicolon  resize grow width 10px

  bindsym Left  resize shrink width 10px
  bindsym Down  resize grow height 10px
  bindsym Up    resize shrink height 10px
  bindsym Right resize grow width 10px

  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+r mode "default"
}
bindsym $mod+r mode "resize"

### Gaps / borders
gaps inner 5
gaps outer 5
smart_gaps on
smart_borders on
default_border pixel 1
default_floating_border pixel 1

### Popups during fullscreen
popup_during_fullscreen smart

### App shortcuts
bindsym $mod+Shift+f exec thunar

### Media keys (PipeWire)
set $refresh killall -SIGUSR1 waybar
bindsym XF86AudioRaiseVolume exec wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+ && $refresh
bindsym XF86AudioLowerVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%- && $refresh
bindsym XF86AudioMute        exec wpctl set-mute   @DEFAULT_AUDIO_SINK@ toggle && $refresh
bindsym XF86AudioMicMute     exec wpctl set-mute   @DEFAULT_AUDIO_SOURCE@ toggle && $refresh

# Optional brightness keys (requires brightnessctl)
# bindsym XF86MonBrightnessUp   exec brightnessctl set +10%
# bindsym XF86MonBrightnessDown exec brightnessctl set 10%-

### Screenshots (grim + slurp)
# Fullscreen
bindsym Print exec grim "$(xdg-user-dir PICTURES)/screenshot-$(date +%F_%H-%M-%S).png"
# Select area
bindsym Shift+Print exec grim -g "$(slurp)" "$(xdg-user-dir PICTURES)/screenshot-$(date +%F_%H-%M-%S).png"

### Colors (ported from your i3 theme)
# class                 border   bground  text     indicator child_border
client.focused          #6272A4  #6272A4  #F8F8F2  #6272A4   #6272A4
client.focused_inactive #44475A  #44475A  #F8F8F2  #44475A   #44475A
client.unfocused        #282A36  #282A36  #BFBFBF  #282A36   #282A36
client.urgent           #44475A  #FF5555  #F8F8F2  #FF5555   #FF5555
client.placeholder      #282A36  #282A36  #F8F8F2  #282A36   #282A36
client.background       #F8F8F2

input type:touchpad {
    tap enabled
    tap_button_map lrm
    natural_scroll enabled
    dwt enabled
    middle_emulation enabled
    click_method clickfinger
    scroll_method two_finger
    accel_profile adaptive
    pointer_accel 0.3
}

bar {
    swaybar_command waybar
    position bottom
    mode hide 
    hidden_state hide
    modifier Mod4
}

